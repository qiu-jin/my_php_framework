路由规则
----

核心路由类通常由控制器基类调用，不需要业务代码调用，所以我们只需理解路由的规则而无需知道其实现方法。

* 默认忽略大小写，URL路径会被转为小写再处理
* 匹配规则和URL路径以/分隔为多个单元，循环匹配
* 规则单元首自字符为* ：匹配一个单元所有字符串，记录匹配内容为整个路径单元。
* 规则单元首自字符为～ ：匹配所有单元字符串，记录匹配内容所有单元字符串。
* 规则单元首自字符为: ：自定义的匹配规则，其后的字符串对应一个函数或静态方法，回调处理返回true为匹配成功，记录匹配内容为整个路径单元。
* 规则单元首自字符为^ ：正则表达式规则，匹配成功后，如果正则中有()则递加记录()的匹配路径内容，否则记录匹配内容为整个路径单元。
* 规则单元为其他字符串 ：匹配规则单元和URL路径单元必须完全相同，不记录匹配内容。
* 匹配结果以 $1 $2 $3 等变量按序调用，循序为从左到右的匹配单元循环匹配递加记录（如果正则匹配中有多个()匹配，则此单元递加记录多个匹配内容）

如下面的路由规则表

```
array(
    '/a/b/c/:id' => '/viewdemo/test/index?id=$1'
    
    '/abc/:id' => '/viewdemo/test/index?id=$1'
),
```

http://host/a/b/c/123 则被'/a/b/c/:id匹配，http://host/abc/123 则被'/abc/:id'匹配
一旦规则表数组key被匹配，然后则需要key对应value做调度数处理。
value如果以斜线开头，那么接着viewdemo单元字符是要调度的module（在为非$module数组时可以省略斜线和module名），?前或最后一个单元的字符index为要调度的action，他们中间所有部分则是调度的controller，?后则是传递匹配到的值


另外在view控制器的index dispatch模式下支持业务控制器类层路由处理。

```
class Test extends Controller\View
{
    protected $route = ['abc/:id' => 'index1?id=$1'];
    
    public function index1(){}
}
```
路由规则表数组key由去除module和controller的url path剩余部分匹配，数组value的只有一个单元即调度的方法